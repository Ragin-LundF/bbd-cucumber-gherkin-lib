// exclude CucumberRunner tests from default test task
test {
    exclude '**/*CucumberRunner*'
    useJUnitPlatform()
}

configurations {
    cucumberRuntime {
        extendsFrom testImplementation
    }
}

tasks.register('cucumber', Test) {
    useJUnitPlatform()
    group = 'verification'
    exclude '**/*Test*'
    include '**/*CucumberRunner*'
    testClassesDirs = testing.suites.test.sources.output.classesDirs
    classpath = testing.suites.test.sources.runtimeClasspath

    minHeapSize = "512m"
    maxHeapSize = "1024m"

    onlyIf("Execute only if cucumber task is called directly") {
        gradle.startParameter.taskNames.contains("cucumber")
    }
}
